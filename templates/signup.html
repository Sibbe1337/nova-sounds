{% extends "base.html" %}

{% block title %}Sign Up - YouTube Shorts Machine{% endblock %}

{% block content %}
<div class="signup-page">
    <div class="container">
        <div class="signup-container">
            <div class="signup-header">
                <h1>Start Your <span class="text-gradient">Free Trial</span></h1>
                <p class="subtitle">Create your first AI-powered Short in minutes</p>
            </div>
            
            <div class="signup-panel">
                <div class="signup-form-container">
                    <div class="pricing-badge">{{ plan|default:'Creator' }} Plan</div>
                    
                    <form id="signupForm" class="signup-form">
                        <div class="form-group">
                            <label for="name">Full Name</label>
                            <input type="text" id="name" name="name" placeholder="Your name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" name="email" placeholder="Your email" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="password">Create Password</label>
                            <div class="password-input">
                                <input type="password" id="password" name="password" placeholder="Minimum 8 characters" required>
                                <button type="button" class="toggle-password">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="password-strength">
                                <div class="strength-indicator">
                                    <span class="indicator-bar"></span>
                                </div>
                                <span class="strength-label">Password strength</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <input type="checkbox" name="terms" required>
                                I agree to the <a href="/terms" target="_blank">Terms of Service</a> and <a href="/privacy" target="_blank">Privacy Policy</a>
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <input type="checkbox" name="newsletter" checked>
                                Send me tips and updates about YouTube Shorts Machine
                            </label>
                        </div>
                        
                        <div class="form-action">
                            <button type="submit" class="btn btn-lg btn-primary full-width">
                                Create Account
                            </button>
                        </div>
                        
                        <div class="form-note text-center">
                            <i class="fas fa-lock"></i> No credit card required for trial
                        </div>
                    </form>
                    
                    <div class="social-signup">
                        <p class="social-divider"><span>Or sign up with</span></p>
                        
                        <div class="social-buttons">
                            <button class="btn btn-social btn-google" id="googleSignIn">
                                <i class="fab fa-google"></i> <span class="btn-text">Google</span>
                                <span class="spinner" style="display: none;">
                                    <i class="fas fa-circle-notch fa-spin"></i>
                                </span>
                            </button>
                            <button class="btn btn-social btn-facebook">
                                <i class="fab fa-facebook"></i> Facebook
                            </button>
                        </div>
                    </div>
                    
                    <div class="login-link text-center">
                        Already have an account? <a href="/login">Log in</a>
                    </div>
                </div>
                
                <div class="signup-benefits">
                    <h3>What's included in your trial:</h3>
                    
                    <ul class="benefits-list">
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <strong>AI-Powered Videos</strong>
                                <p>Create perfectly synchronized videos from music</p>
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <strong>Full Music Library</strong>
                                <p>Access to all trending, royalty-free tracks</p>
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <strong>All Visual Styles</strong>
                                <p>Cinematic, Vibrant, Minimalist, and more</p>
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <strong>Analytics Dashboard</strong>
                                <p>Track performance and audience engagement</p>
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <strong>Direct Upload</strong>
                                <p>Publish to YouTube with optimized metadata</p>
                            </div>
                        </li>
                    </ul>
                    
                    <div class="testimonial-quote">
                        <div class="quote-content">
                            "I've tried many video tools, but this is by far the easiest way to create Shorts that actually get views."
                        </div>
                        <div class="quote-author">
                            <img src="/static/images/testimonials/user1.jpg" alt="Testimonial">
                            <div>
                                <strong>Alex Morgan</strong>
                                <span>Music Producer</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Password visibility toggle
        const togglePassword = document.querySelector('.toggle-password');
        const passwordInput = document.querySelector('#password');
        
        if (togglePassword && passwordInput) {
            togglePassword.addEventListener('click', function() {
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);
                
                const icon = this.querySelector('i');
                icon.classList.toggle('fa-eye');
                icon.classList.toggle('fa-eye-slash');
            });
        }
        
        // Password strength indicator
        const strengthIndicator = document.querySelector('.strength-indicator .indicator-bar');
        const strengthLabel = document.querySelector('.strength-label');
        
        if (passwordInput && strengthIndicator && strengthLabel) {
            passwordInput.addEventListener('input', function() {
                const value = this.value;
                let strength = 0;
                
                // Calculate password strength (simple version)
                if (value.length >= 8) strength += 20;
                if (value.match(/[A-Z]/)) strength += 20;
                if (value.match(/[a-z]/)) strength += 20;
                if (value.match(/[0-9]/)) strength += 20;
                if (value.match(/[^A-Za-z0-9]/)) strength += 20;
                
                // Update indicator
                strengthIndicator.style.width = `${strength}%`;
                
                // Update color and label
                if (strength < 40) {
                    strengthIndicator.style.backgroundColor = '#dc3545';
                    strengthLabel.textContent = 'Weak password';
                } else if (strength < 80) {
                    strengthIndicator.style.backgroundColor = '#ffc107';
                    strengthLabel.textContent = 'Medium password';
                } else {
                    strengthIndicator.style.backgroundColor = '#28a745';
                    strengthLabel.textContent = 'Strong password';
                }
            });
        }
        
        // Form submission
        const signupForm = document.getElementById('signupForm');
        
        if (signupForm) {
            signupForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Show loading state
                const submitButton = this.querySelector('button[type="submit"]');
                const originalText = submitButton.innerHTML;
                submitButton.disabled = true;
                submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating Account...';
                
                // Simulate API call with progress tracker
                const tracker = createProgressTracker({
                    title: 'Creating Your Account',
                    steps: [
                        'Validating information',
                        'Creating account',
                        'Setting up workspace',
                        'Loading dashboard'
                    ],
                    autoStart: true,
                    theme: document.body.classList.contains('dark-theme') ? 'dark' : 'light'
                });
                
                // Simulate progress through steps
                setTimeout(() => tracker.nextStep(), 1000);
                setTimeout(() => tracker.nextStep(), 2500);
                setTimeout(() => tracker.nextStep(), 4000);
                
                // Redirect after completion
                setTimeout(() => {
                    tracker.complete('Account created successfully!');
                    window.location.href = '/app?welcome=true';
                }, 5000);
            });
        }
        
        // Add loading state to buttons
        const buttons = document.querySelectorAll('.btn');
        buttons.forEach(button => {
            button.addEventListener('click', function() {
                if (this.type === 'submit' || this.classList.contains('btn-primary')) {
                    this.classList.add('is-loading');
                    setTimeout(() => {
                        this.classList.remove('is-loading');
                    }, 2000);
                }
            });
        });
    });
</script>

<!-- Include Supabase Authentication -->
<script type="module" src="/static/js/supabase-auth.js"></script>

<!-- Add button loading state CSS -->
<style>
    .signup-page {
        padding: 60px 0;
        background: linear-gradient(135deg, #f5f9ff 0%, #f0f2ff 100%);
        min-height: calc(100vh - 80px);
    }
    
    .signup-container {
        max-width: 1100px;
        margin: 0 auto;
    }
    
    .signup-header {
        text-align: center;
        margin-bottom: 40px;
    }
    
    .signup-header h1 {
        font-size: 2.5rem;
        margin-bottom: 16px;
    }
    
    .signup-header .subtitle {
        font-size: 1.1rem;
        color: var(--text-color-light);
    }
    
    .signup-panel {
        display: flex;
        background-color: white;
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-lg);
        overflow: hidden;
    }
    
    .signup-form-container {
        flex: 1;
        padding: 40px;
        position: relative;
        border-right: 1px solid var(--border-color);
    }
    
    .signup-benefits {
        width: 40%;
        padding: 40px;
        background-color: var(--primary-color-light);
    }
    
    .signup-form .form-group {
        margin-bottom: 20px;
    }
    
    .signup-form label {
        display: block;
        margin-bottom: 6px;
        font-weight: 500;
    }
    
    .signup-form input[type="text"],
    .signup-form input[type="email"],
    .signup-form input[type="password"] {
        width: 100%;
        padding: 12px 16px;
        border: 1px solid var(--border-color);
        border-radius: var(--radius-md);
        font-size: 1rem;
        transition: border-color 0.2s ease;
    }
    
    .signup-form input:focus {
        border-color: var(--primary-color);
        outline: none;
    }
    
    .signup-form .password-input {
        position: relative;
    }
    
    .signup-form .toggle-password {
        position: absolute;
        right: 12px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        color: var(--text-color-light);
        cursor: pointer;
    }
    
    .password-strength {
        margin-top: 8px;
        font-size: 0.8rem;
        color: var(--text-color-light);
    }
    
    .strength-indicator {
        height: 4px;
        background-color: #e9ecef;
        border-radius: 2px;
        margin-bottom: 4px;
        overflow: hidden;
    }
    
    .strength-indicator .indicator-bar {
        height: 100%;
        width: 0;
        background-color: #adb5bd;
        transition: width 0.3s ease, background-color 0.3s ease;
    }
    
    .signup-form .form-action {
        margin-top: 30px;
    }
    
    .full-width {
        width: 100%;
    }
    
    .social-signup {
        margin-top: 30px;
    }
    
    .social-divider {
        position: relative;
        text-align: center;
        margin-bottom: 20px;
    }
    
    .social-divider::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        height: 1px;
        background-color: var(--border-color);
    }
    
    .social-divider span {
        position: relative;
        background-color: white;
        padding: 0 10px;
        color: var(--text-color-light);
    }
    
    .social-buttons {
        display: flex;
        gap: 10px;
    }
    
    .btn-social {
        flex: 1;
        background-color: white;
        border: 1px solid var(--border-color);
        color: var(--text-color);
    }
    
    .btn-google:hover {
        background-color: #ea4335;
        border-color: #ea4335;
        color: white;
    }
    
    .btn-facebook:hover {
        background-color: #1877f2;
        border-color: #1877f2;
        color: white;
    }
    
    .login-link {
        margin-top: 20px;
    }
    
    .text-center {
        text-align: center;
    }
    
    .form-note {
        margin-top: 15px;
        font-size: 0.9rem;
        color: var(--text-color-light);
    }
    
    .form-note i {
        margin-right: 5px;
    }
    
    .benefits-list {
        list-style: none;
        padding: 0;
        margin: 25px 0;
    }
    
    .benefits-list li {
        display: flex;
        align-items: flex-start;
        margin-bottom: 20px;
    }
    
    .benefits-list i {
        color: var(--success-color);
        margin-right: 15px;
        font-size: 1.2rem;
        margin-top: 2px;
    }
    
    .benefits-list p {
        margin: 5px 0 0 0;
        color: var(--text-color-light);
        font-size: 0.9rem;
    }
    
    .testimonial-quote {
        background-color: white;
        padding: The 20px;
        border-radius: var(--radius-md);
        margin-top: 30px;
    }
    
    .quote-content {
        font-style: italic;
        margin-bottom: 15px;
        position: relative;
        padding-left: 30px;
    }
    
    .quote-content::before {
        content: '"';
        position: absolute;
        left: 0;
        top: 0;
        font-size: 3rem;
        color: var(--primary-color-light);
        line-height: 1;
        font-family: serif;
    }
    
    .quote-author {
        display: flex;
        align-items: center;
    }
    
    .quote-author img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        margin-right: 10px;
        object-fit: cover;
    }
    
    .quote-author div {
        display: flex;
        flex-direction: column;
    }
    
    .quote-author span {
        font-size: 0.8rem;
        color: var(--text-color-light);
    }
    
    .pricing-badge {
        position: absolute;
        top: 0;
        right: 40px;
        background-color: var(--primary-color);
        color: white;
        padding: 8px 20px;
        font-size: 0.9rem;
        font-weight: 600;
        border-radius: 0 0 var(--radius-md) var(--radius-md);
    }
    
    @media (max-width: 991px) {
        .signup-panel {
            flex-direction: column;
        }
        
        .signup-form-container {
            border-right: none;
            border-bottom: 1px solid var(--border-color);
        }
        
        .signup-benefits {
            width: 100%;
        }
    }
    
    @media (max-width: 767px) {
        .signup-page {
            padding: 30px 0;
        }
        
        .signup-form-container,
        .signup-benefits {
            padding: 30px 20px;
        }
        
        .social-buttons {
            flex-direction: column;
        }
    }
    
    .btn.is-loading .btn-text {
        visibility: hidden;
    }
    
    .btn.is-loading .spinner {
        display: inline-block !important;
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }
    
    .btn {
        position: relative;
    }
    
    .btn-google {
        background-color: white;
        color: #757575;
        border: 1px solid #ddd;
        transition: all 0.3s ease;
    }
    
    .btn-google:hover:not(.is-loading) {
        background-color: #ea4335;
        color: white;
        border-color: #ea4335;
    }
    
    .btn-google:active:not(.is-loading) {
        background-color: #d62516;
        border-color: #d62516;
    }
    
    .btn-google.is-loading {
        background-color: #f8f9fa;
        color: #757575;
        cursor: not-allowed;
    }
</style>
{% endblock %} 